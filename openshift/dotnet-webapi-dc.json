{
    "kind": "Template",
    "apiVersion": "v1",
    "metadata": {
      "name": "prime-dotnet-dc",
      "creationTimestamp": null
    },
    "parameters": [
        {
          "name": "NAME",
          "displayName": "Name",
          "description": "A prefix appended to all objects",
          "required": true,
          "value": "prime"

        },
        {
          "name": "SUFFIX",
          "displayName": "Name Suffix",
          "description": "A suffix appended to all objects",
          "required": true,
          "value": "dotnet"
        },
        {
          "name": "SOURCE_CONTEXT_DIR",
          "required": true,
          "value": "prime-dotnet-webapi"
        },
        {
          "name": "SOURCE_REPOSITORY_URL",
          "required": true,
          "value": "https://github.com/bcgov/moh-prime"

        },
        {
          "name": "SOURCE_REPOSITORY_REF",
          "required": false,
          "value": "develop"
        }
      ],
      "objects": [
        {
            "apiVersion": "v1",
            "kind": "DeploymentConfig",
            "metadata": {
              "annotations": {
                "kompose.cmd": "kompose convert --provider=openshift --build=build-config --build-repo=https://github.com/bcgov/moh-prime.git\n--build-branch=develop --deployment-config",
                "kompose.version": "1.18.0 (06a2e56)"
              },
              "creationTimestamp": null,
              "labels": {
                "io.kompose.service": "dotnet-webapi"
              },
              "name": "dotnet-webapi"
            },
            "spec": {
              "replicas": 1,
              "selector": {
                "io.kompose.service": "dotnet-webapi"
              },
              "strategy": null,
              "resources": {
                "requests": {
                  "cpu": "300m",
                  "memory": "512Mi"
                },
                "limits": {
                  "cpu": "1",
                  "memory": "1024Mi"
                }
              },
              "template": {
                "metadata": {
                  "creationTimestamp": null,
                  "labels": {
                    "io.kompose.service": "dotnet-webapi"
                  }
                },
                "spec": {
                  "containers": [
                    {
                      "env": [
                        {
                          "name": "ASPNETCORE_ENVIRONMENT",
                          "value": "Development"
                        },
                        {
                          "name": "ASPNETCORE_HTTPS_PORT",
                          "value": "5001"
                        },
                        {
                          "name": "ASPNETCORE_URLS",
                          "value": "http://+:8080"
                        },
                        {
                          "name": "DB_CONNECTION_STRING",
                          "value": "host=postgres;port=5432;database=postgres;username=postgres;password=postgres"
                        },
                        {
                          "name": "JWT_SIGNING_KEY",
                          "value": "SdqlA0Y5e6HMAK1wm6iHHHz2u37XGtlo"
                        }
                      ],
                      "image": " ",
                      "name": "primeapi",
                      "ports": [
                        {
                          "containerPort": 8080
                        },
                        {
                          "containerPort": 5001
                        }
                      ],
                      "resources": {}
                    }
                  ],
                  "restartPolicy": "Always"
                }
              },
              "test": false,
              "triggers": [
                {
                  "type": "ConfigChange"
                },
                {
                  "imageChangeParams": {
                    "automatic": true,
                    "containerNames": [
                      "primeapi"
                    ],
                    "from": {
                      "kind": "ImageStreamTag",
                      "name": "dotnet-webapi:latest"
                    }
                  },
                  "type": "ImageChange"
                }
              ]
            },
            "status": {}
          },
          {
            "apiVersion": "v1",
            "kind": "Service",
            "metadata": {
              "annotations": {
                "kompose.cmd": "kompose convert --provider=openshift --build=build-config --build-repo=https://github.com/bcgov/moh-prime.git",
                "kompose.version": "1.18.0 (06a2e56)"
              },
              "creationTimestamp": null,
              "labels": {
                "io.kompose.service": "dotnet-webapi"
              },
              "name": "dotnet-webapi"
            },
            "spec": {
              "ports": [
                {
                  "name": "5000",
                  "port": 5000,
                  "targetPort": 8080
                },
                {
                  "name": "5001",
                  "port": 5001,
                  "targetPort": 5001
                }
              ],
              "selector": {
                "io.kompose.service": "dotnet-webapi"
              }
            },
            "status": {
              "loadBalancer": {}
            }
          }
      ]
}