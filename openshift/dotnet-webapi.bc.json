{
    "kind": "Template",
    "apiVersion": "v1",
    "metadata": {
      "name": "dotnet-webapi-bc",
      "creationTimestamp": null
    },
    "parameters": [
      {
        "name": "NAME",
        "displayName": "Name",
        "description": "A prefix appended to all objects",
        "required": true
      },
      {
        "name": "SUFFIX",
        "displayName": "Name Suffix",
        "description": "A suffix appended to all objects",
        "required": true
      },
      {
        "name": "VERSION",
        "required": true
      },
      {
        "name": "SOURCE_CONTEXT_DIR",
        "required": true
      },
      {
        "name": "SOURCE_REPOSITORY_URL",
        "required": true
      },
      {
        "name": "SOURCE_REPOSITORY_REF",
        "required": true
      }
    ],
    "objects": [
       {
          "apiVersion": "v1",
          "kind": "ImageStream",
          "metadata": {
            "creationTimestamp": null,
            "labels": {
              "io.kompose.service": "${NAME}-${SUFFIX}"
            },
            "name": "${NAME}-${SUFFIX}"
          },
          "spec": {
            "tags": [
              {
                "annotations": null,
                "from": {
                  "kind": "DockerImage",
                  "name": "${NAME}-${SUFFIX}"
                },
                "generation": null,
                "importPolicy": {},
                "name": "latest"
              }
            ]
          },
          "status": {
            "dockerImageRepository": ""
          }
       },
       {
          "apiVersion": "v1",
          "kind": "BuildConfig",
          "metadata": {
            "annotations": {
              "kompose.cmd": "kompose convert --provider=openshift --build=build-config --build-repo=https://github.com/bcgov/moh-prime.git",
              "kompose.version": "1.18.0 (06a2e56)"
            },
            "creationTimestamp": null,
            "labels": {
              "io.kompose.service": "${NAME}-${SUFFIX}"
            },
            "name": "${NAME}-${SUFFIX}"
          },
          "spec": {
            "completionDeadlineSeconds": 1200,
            "nodeSelector": null,
            "output": {
              "to": {
                "kind": "ImageStreamTag",
                "name": "${NAME}-${SUFFIX}:${VERSION}"
              }
            },
            "postCommit": {},
            "resources": {
              "requests": {
                "cpu": "300m",
                "memory": "512Mi"
              },
              "limits": {
                "cpu": "1",
                "memory": "1024Mi"
              }
            },
            "runPolicy": "Serial",
            "source": {
                "dockerfile": "FROM docker-registry.default.svc:5000/dqszvc-dev/dotnet-22-rhel7 AS build\n ENV ASPNETCORE_ENVIRONMENT Development \n COPY *.csproj . \n RUN dotnet restore \n COPY . . \n RUN dotnet publish -c Release -o out \n docker-registry.default.svc:5000/dqszvc-dev/dotnet-22-runtime-rhel7 \n COPY --from=build out . \n EXPOSE 8080 5001 \n ENTRYPOINT [dotnet, prime.dll]"
            },
            "strategy": {
              "dockerStrategy": {},
              "type": "Docker"
            },
            "triggers": [
           {
             "type": "ConfigChange"
           },
           {
             "type": "ImageChange"
           }
            ]
          },
          "status": {
            "lastVersion": 0
          }
       }
    ]
 }